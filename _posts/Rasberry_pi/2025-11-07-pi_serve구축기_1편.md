---
title: "ë¼ì¦ˆë² ë¦¬íŒŒì´ ì„œë²„ êµ¬ì¶•ê¸°: Cloudflare Tunnel + Zero Trust + ttyd ì™„ì„±ê¹Œì§€ ìš”ì•½ë³¸..."
date: 2025-11-07 15:00:00 +0900
categories: [Raspberry, Tutorial]
tags: [raspberrypi, server, cloudflare, ttyd, zerotrust]
pin: True
---

## ðŸ“… í”„ë¡œì íŠ¸ ê°œìš”

ì˜¤ëŠ˜ì˜ ëª©í‘œëŠ” **ë¼ì¦ˆë² ë¦¬íŒŒì´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ 24ì‹œê°„ ëŒì•„ê°€ëŠ” ì›ê²© ê°œë°œ í™˜ê²½**ì„ êµ¬ì¶•í•˜ëŠ” ê²ƒì´ì—ˆë‹¤.  
ë³´ì•ˆ, ì ‘ê·¼ì„±, ìžë™í™”ë¥¼ ëª¨ë‘ ë§Œì¡±í•˜ëŠ” ì„œë²„ êµ¬ì¡°ë¥¼ ì§ì ‘ ì„¤ê³„í•˜ê³  êµ¬í˜„í–ˆë‹¤.  
ê²°ê³¼ì ìœ¼ë¡œ **Cloudflare Tunnel + Zero Trust + ttyd(Web Terminal)** ì¡°í•©ìœ¼ë¡œ ì™„ì„±ëœ í™˜ê²½ì„ ë§Œë“¤ì—ˆë‹¤.

---

## ðŸ”§ ì„œë²„ ë° í™˜ê²½ ì„¸íŒ…

- **Raspberry Pi OS (Lite)** ê¸°ë°˜ì˜ ì„œë²„ í™˜ê²½  
- **ttyd (Web Terminal)** ì„¤ì¹˜ ë° systemd ì„œë¹„ìŠ¤ ë“±ë¡ ì‹œë„  
  - ì‹¤í–‰ ëª…ë ¹:
    ```bash
    ExecStart=/home/m0squito/ttyd -p 3000 --check-origin --writable --credential m0squito:sim040815 /usr/bin/bash
    ```
  - `Restart=always` ì˜µì…˜ìœ¼ë¡œ ìž¬ì‹œìž‘ ìžë™í™”  
  - ì´ˆê¸° ì˜¤ë¥˜ (`status=203/EXEC`) ë°œìƒ â†’ ì‹¤í–‰ ê²½ë¡œ ë° ê¶Œí•œ ë¬¸ì œ í™•ì¸ ì¤‘  

---

## ðŸŒ ë„¤íŠ¸ì›Œí¬ ë° ë³´ì•ˆ ì„¤ì •

- **Cloudflare Tunnel**ì„ í†µí•´ ì™¸ë¶€ ì ‘ê·¼ ê°€ëŠ¥í•˜ë„ë¡ êµ¬ì„±  
  - ë¡œì»¬ `ttyd`ë¥¼ HTTPSë¡œ í„°ë„ë§  
  - **Zero Trust ì¸ì¦** + **GitHub ë¡œê·¸ì¸ ì—°ë™**  
  - `.dev` ë„ë©”ì¸ êµ¬ìž… í›„ HTTPS í™œì„±í™”  
  - Zero Trust Access ì •ì±… ì ìš©, ì™¸ë¶€ ì ‘ê·¼ ì™„ë²½ ì°¨ë‹¨  

---

## ðŸ§± ë³´ì•ˆ ê°•í™” ì „ëžµ

- `--credential` ì˜µì…˜ìœ¼ë¡œ ê¸°ë³¸ ê³„ì •/ë¹„ë°€ë²ˆí˜¸ ì¸ì¦  
- `--check-origin` í™œì„±í™”ë¡œ CSRF ë°©ì–´  
- Cloudflare Zero Trust + GitHub OAuthë¡œ ë‹¤ì¤‘ ì¸ì¦ ì²´ê³„ êµ¬ì¶•  
- root ê¶Œí•œ ìµœì†Œí™”, ì¼ë°˜ ì‚¬ìš©ìž ê³„ì • ì¤‘ì‹¬ ìš´ì˜  

---

## âš™ï¸ ì‹œìŠ¤í…œ ìœ ì§€ë³´ìˆ˜

- `systemctl daemon-reload` ì˜¤ë¥˜ ì²˜ë¦¬ ë° ì„œë¹„ìŠ¤ ìž¬ì‹œìž‘ í…ŒìŠ¤íŠ¸  
- sudo ê¶Œí•œ ë° ì‹¤í–‰ ê²½ë¡œ ì ê²€  
- ìž¬ë¶€íŒ… í›„ `ttyd` ìžë™ ì‹¤í–‰ í™•ì¸ ì˜ˆì •  

---

## ðŸ§© ì‹¤í—˜ ë° í…ŒìŠ¤íŠ¸

- `tmux` ì„¸ì…˜ ë¶„ë¦¬ / ì¤‘ì²© í…ŒìŠ¤íŠ¸  
- Cloudflare ë¬´ë£Œ í”Œëžœì˜ ì ‘ì† ì œí•œ, ë„ë©”ì¸ ì˜ì¡´ì„± í™•ì¸  
- LAN IP êµ¬ì¡° (`192.168.x.x`) ìž¬í•™ìŠµ â€” ì„œë¸Œë„·, ê²Œì´íŠ¸ì›¨ì´ ì´í•´ë„ í–¥ìƒ  

---

## ðŸ“œ í•˜ë£¨ ìš”ì•½

> ì˜¤ëŠ˜ì€ **Pi ì„œë²„ì˜ ë³´ì•ˆí˜• ì›ê²© ê°œë°œ í™˜ê²½ì´ ì™„ì„±ëœ ë‚ **ì´ì—ˆë‹¤.  
> Cloudflare Tunnelê³¼ Zero Trust ì¸ì¦ì„ ì—®ì–´ì„œ ì™¸ë¶€ ì ‘ê·¼ì„ í†µì œí–ˆê³ ,  
> ttydë¥¼ systemd ì„œë¹„ìŠ¤ë¡œ ë“±ë¡í•´ **ìžë™í™”ë˜ê³  ì§€ì†ì ì¸ CLI í™˜ê²½**ì„ êµ¬ì¶•í–ˆë‹¤.  
> ë‹¤ìŒ ëª©í‘œëŠ” **203/EXEC ì‹¤í–‰ ì˜¤ë¥˜ í•´ê²°**ê³¼ **ìž¬ë¶€íŒ… í›„ ìžë™ ë³µêµ¬ ì•ˆì •í™”**ë‹¤.

---

## ðŸ§  í˜„ìž¥ ì¼ì§€

### 1ï¸âƒ£ ë¼ì¦ˆë² ë¦¬íŒŒì´ OS êµ½ê¸°
> SSHê°€ ê¸°ë³¸ì ìœ¼ë¡œ êº¼ì ¸ ìžˆì–´ì„œ `/boot/ssh` íŒŒì¼ì„ ìˆ˜ë™ìœ¼ë¡œ ë§Œë“¤ì–´  
> ë¶€íŒ… ì‹œ ìžë™ìœ¼ë¡œ SSHê°€ ì¼œì§€ê²Œ ìˆ˜ì •í•¨.

### 2ï¸âƒ£ ttydë¡œ ë‚´ bashë¥¼ ë„ìš°ê¸°
> Node.js ê¸°ë°˜ ì›¹í„°ë¯¸ë„ì„ ì‹œë„í–ˆì§€ë§Œ ë Œë”ë§ì´ ì—‰ë§ì´ë¼ í¬ê¸°í•˜ê³ ,  
> ê°€ë³ê³  ë‹¨ìˆœí•œ **ttyd**ë¡œ ì „í™˜.  
> ë³´ì•ˆìƒ ì·¨ì•½ì ì„ ìš°ë ¤í–ˆì§€ë§Œ ì¶”í›„ Cloudflareë¡œ ë³´ê°•í•˜ê¸°ë¡œ ê²°ì •.

### 3ï¸âƒ£ Cloudflare Tunnel êµ¬ì„±
> ìž„ì‹œ ì„œë²„ë¡œ í„°ë„ë§ í…ŒìŠ¤íŠ¸ ì¤‘ ë„ë©”ì¸ ê³ ì • ë¶ˆê°€ ë°  
> Zero Trust ì„¤ì • ë¯¸ì ìš© ë¬¸ì œ ë°œê²¬.  
> í•´ê²°ì±…: ë„ë©”ì¸ì„ ì§ì ‘ êµ¬ë§¤í•˜ê³  Tunnelì„ ì •ì‹ ë“±ë¡.

### 4ï¸âƒ£ Squarespace + Cloudflare ì—°ë™
> `.dev` ë„ë©”ì¸ì„ Squarespaceì—ì„œ êµ¬ìž…í•˜ê³   
> Cloudflare DNSë¡œ ë„˜ê¸°ëŠ” ê³¼ì •ì—ì„œ ì—°ê²° ì§€ì—° ë°œìƒ.  
> `config.json` ì§ì ‘ ìˆ˜ì •ìœ¼ë¡œ í•´ê²°.

### 5ï¸âƒ£ systemd ì„œë¹„ìŠ¤ êµ¬ì„±
> ë¶€íŒ… ì‹œ ìžë™ ì‹¤í–‰ì„ ìœ„í•´ `ttyd.service` ìž‘ì„±.  
> ì²˜ìŒì—” `bashrc`ì—ì„œ ì‹¤í–‰í•˜ë ¤ í–ˆìœ¼ë‚˜, ë¡œê·¸ì¸ ì„¸ì…˜ í•œì •ì´ë¼ ì‹¤íŒ¨.  
> `systemd` + `Restart=always`ë¡œ ì•ˆì •í™”.  

### 6ï¸âƒ£ ë³´ì•ˆ ì¸ì¦ ì™„ì„±
> ttydì— ë¹„ë°€ë²ˆí˜¸ ì¸ì¦ ì¶”ê°€ í›„  
> Cloudflare Zero Trustì—ì„œ GitHub OAuth ì¸ì¦ ì—°ë™.  
> `tunnel.m0squito.dev`ì— ì ‘ê·¼ ì‹œ GitHub ë¡œê·¸ì¸ í•„ìš”í•˜ë„ë¡ ì„¤ì • ì™„ë£Œ.  

### 7ï¸âƒ£ ë³µêµ¬ í…ŒìŠ¤íŠ¸
> ë¼ì¦ˆë² ë¦¬íŒŒì´ë¥¼ ì™„ì „ížˆ ì¢…ë£Œ í›„ ìž¬ë¶€íŒ….  
> í„°ë„, ì¸ì¦, ttyd ëª¨ë‘ ì •ìƒ ë³µêµ¬ë˜ëŠ”ì§€ í™•ì¸ ì™„ë£Œ.

---

## ðŸ§© íšŒê³ 

> 32ì‹œê°„ ê±¸ë ¸ë‹¤...
> *â€œêµ°ëŒ€ì—ì„œë„ ê²°êµ­ í™˜ê²½ì€ ë§Œë“ ë‹¤.â€*  
> ì œí•œëœ í™˜ê²½ì—ì„œë„ ë„ë©”ì¸ êµ¬ìž…ë¶€í„° Zero Trust ì¸ì¦ê¹Œì§€ ì§ì ‘ êµ¬ì¶•í•˜ë©°,  
> ë‹¨ìˆœí•œ ê°œì¸ ì„œë²„ê°€ ì•„ë‹Œ **ë³´ì•ˆí˜• ê°œë°œ ì¸í”„ë¼**ë¥¼ ì™„ì„±í–ˆë‹¤.  
>  
> ë‹¤ìŒ ëª©í‘œ:  
> - Dockerë¡œ í™˜ê²½ ë¶„ë¦¬  
> - Zero Trust ë¡œê·¸ ë¶„ì„ ìžë™í™”  
> - ttydì™€ Python í™˜ê²½ í†µí•©  

---
